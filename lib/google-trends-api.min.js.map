{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///google-trends-api.min.js","webpack:///webpack/bootstrap 03af83cedb275716dfc4","webpack:///./src/index.js","webpack:///./src/api.js","webpack:///./src/request.js","webpack:///external \"https\"","webpack:///external \"querystring\"","webpack:///./src/utilities.js"],"names":["root","factory","exports","module","require","define","amd","this","__WEBPACK_EXTERNAL_MODULE_3__","__WEBPACK_EXTERNAL_MODULE_4__","modules","__webpack_require__","moduleId","installedModules","id","loaded","call","m","c","p","_interopRequireDefault","obj","__esModule","default","Object","defineProperty","value","_api","_api2","_request","_request2","_utilities","interestHandler","processor","objectConstructor","trendHandler","apiRequest","bind","undefined","autoComplete","dailyTrends","interestByRegion","interestOverTime","realTimeTrends","relatedQueries","relatedTopics","request","searchType","_ref","resultsPromise","reqObj","cb","_objectConstructor","cbFunc","Error","Promise","reject","then","res","err","rereq","options","done","req","_https2","chunk","on","data","toString","e","end","method","host","path","qs","agent","_querystring2","stringify","cookieVal","headers","cookie","resolve","statusCode","split","response","_https","_querystring","isLessThan7Days","date1","date2","Math","abs","convertDateToString","d","shouldIncludeTime","formatWithoutDashes","month","getUTCMonth","day","getUTCDate","dash","length","year","getUTCFullYear","hour","getUTCHours","minute","getUTCMinutes","formatTime","startTime","endTime","temp","Date","granularTimeResolution","time","validateGeo","multiGeoKeyword","Array","isArray","geo","keyword","validateTime","validateObj","_typeof","invalidCb","constructInterestObj","hl","category","timezone","getTimezoneOffset","possibleProperties","indexOf","property","formatResolution","resolution","arguments","resolutions","isResValid","some","toUpperCase","parseResults","results","JSON","parse","slice","widgets","requestBody","formatComparisonItems","isMultiRegion","isMultiKeyword","fill","items","reduce","arr","push","_extends","forEach","region","index","getInterestResults","map","Auto complete","encodeURIComponent","Interest over time","_id","Interest by region","Related topics","Related queries","comparisonItem","includeLowSearchVolumeGeos","tz","_map$searchType","parsedResults","resultObj","find","_ref$id","errObj","message","token","requestOptions","nextOptions","getTrendingResults","searchTypeMap","Daily trends","extraParams","ed","trendDate","ns","Real time trends","fi","fs","ri","rs","sort","cat","constructTrendingObj","date","defaults","assign","target","i","source","key","prototype","hasOwnProperty","Symbol","iterator","constructor"],"mappings":"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","file":"google-trends-api.min.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"https\"), require(\"querystring\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"google-trends-api\", [\"https\", \"querystring\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"google-trends-api\"] = factory(require(\"https\"), require(\"querystring\"));\n\telse\n\t\troot[\"google-trends-api\"] = factory(root[\"https\"], root[\"querystring\"]);\n})(this, function(__WEBPACK_EXTERNAL_MODULE_3__, __WEBPACK_EXTERNAL_MODULE_4__) {\nreturn \n\n\n/** WEBPACK FOOTER **\n ** webpack/universalModuleDefinition\n **/","(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"https\"), require(\"querystring\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"google-trends-api\", [\"https\", \"querystring\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"google-trends-api\"] = factory(require(\"https\"), require(\"querystring\"));\n\telse\n\t\troot[\"google-trends-api\"] = factory(root[\"https\"], root[\"querystring\"]);\n})(this, function(__WEBPACK_EXTERNAL_MODULE_3__, __WEBPACK_EXTERNAL_MODULE_4__) {\nreturn /******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId])\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\texports: {},\n/******/ \t\t\tid: moduleId,\n/******/ \t\t\tloaded: false\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.loaded = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(0);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _api = __webpack_require__(1);\n\t\n\tvar _api2 = _interopRequireDefault(_api);\n\t\n\tvar _request = __webpack_require__(2);\n\t\n\tvar _request2 = _interopRequireDefault(_request);\n\t\n\tvar _utilities = __webpack_require__(5);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tvar interestHandler = {\n\t  processor: _utilities.getInterestResults,\n\t  objectConstructor: _utilities.constructInterestObj\n\t};\n\t\n\tvar trendHandler = {\n\t  processor: _utilities.getTrendingResults,\n\t  objectConstructor: _utilities.constructTrendingObj\n\t};\n\t\n\tvar apiRequest = _api2.default.bind(undefined, _request2.default);\n\t\n\texports.default = {\n\t  autoComplete: apiRequest('Auto complete', interestHandler),\n\t  dailyTrends: apiRequest('Daily trends', trendHandler),\n\t  interestByRegion: apiRequest('Interest by region', interestHandler),\n\t  interestOverTime: apiRequest('Interest over time', interestHandler),\n\t  realTimeTrends: apiRequest('Real time trends', trendHandler),\n\t  relatedQueries: apiRequest('Related queries', interestHandler),\n\t  relatedTopics: apiRequest('Related topics', interestHandler)\n\t};\n\tmodule.exports = exports['default'];\n\n/***/ },\n/* 1 */\n/***/ function(module, exports) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\texports.default = function (request, searchType, _ref) {\n\t  var processor = _ref.processor,\n\t      objectConstructor = _ref.objectConstructor;\n\t\n\t  var resultsPromise = processor(request);\n\t\n\t  return function (reqObj, cb) {\n\t    var _objectConstructor = objectConstructor(reqObj, cb),\n\t        cbFunc = _objectConstructor.cbFunc,\n\t        obj = _objectConstructor.obj;\n\t\n\t    if (obj instanceof Error) return Promise.reject(cbFunc(obj));\n\t\n\t    return resultsPromise(searchType, obj).then(function (res) {\n\t      return cbFunc(null, res);\n\t    }).catch(function (err) {\n\t      return Promise.reject(cbFunc(err));\n\t    });\n\t  };\n\t};\n\t\n\tmodule.exports = exports['default'];\n\n/***/ },\n/* 2 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\texports.default = request;\n\t\n\tvar _https = __webpack_require__(3);\n\t\n\tvar _https2 = _interopRequireDefault(_https);\n\t\n\tvar _querystring = __webpack_require__(4);\n\t\n\tvar _querystring2 = _interopRequireDefault(_querystring);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\t// cache of the cookie - avoid re-requesting on subsequent requests.\n\tvar cookieVal = void 0;\n\t\n\t// simpler request method for avoiding double-promise confusion\n\tfunction rereq(options, done) {\n\t  var req = void 0;\n\t\n\t  req = _https2.default.request(options, function (res) {\n\t    var chunk = '';\n\t\n\t    res.on('data', function (data) {\n\t      chunk += data;\n\t    });\n\t    res.on('end', function () {\n\t      done(null, chunk.toString('utf8'));\n\t    });\n\t  });\n\t  req.on('error', function (e) {\n\t    done(e);\n\t  });\n\t  req.end();\n\t}\n\t\n\tfunction request(_ref) {\n\t  var method = _ref.method,\n\t      host = _ref.host,\n\t      path = _ref.path,\n\t      qs = _ref.qs,\n\t      agent = _ref.agent;\n\t\n\t  var options = {\n\t    host: host,\n\t    method: method,\n\t    path: path + '?' + _querystring2.default.stringify(qs)\n\t  };\n\t\n\t  if (agent) options.agent = agent;\n\t  // will use cached cookieVal if set on 429 error\n\t  if (cookieVal) options.headers = { 'cookie': cookieVal };\n\t\n\t  return new Promise(function (resolve, reject) {\n\t    var req = _https2.default.request(options, function (res) {\n\t      var chunk = '';\n\t\n\t      res.on('data', function (data) {\n\t        chunk += data;\n\t      });\n\t\n\t      res.on('end', function () {\n\t        if (res.statusCode === 429 && res.headers['set-cookie']) {\n\t          // Fix for the \"too many requests\" issue\n\t          // Look for the set-cookie header and re-request\n\t          cookieVal = res.headers['set-cookie'][0].split(';')[0];\n\t          options.headers = { 'cookie': cookieVal };\n\t          rereq(options, function (err, response) {\n\t            if (err) return reject(err);\n\t            resolve(response);\n\t          });\n\t        } else {\n\t          resolve(chunk.toString('utf8'));\n\t        }\n\t      });\n\t    });\n\t\n\t    req.on('error', function (e) {\n\t      reject(e);\n\t    });\n\t\n\t    req.end();\n\t  });\n\t}\n\tmodule.exports = exports['default'];\n\n/***/ },\n/* 3 */\n/***/ function(module, exports) {\n\n\tmodule.exports = require(\"https\");\n\n/***/ },\n/* 4 */\n/***/ function(module, exports) {\n\n\tmodule.exports = require(\"querystring\");\n\n/***/ },\n/* 5 */\n/***/ function(module, exports) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\t\n\tvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\t\n\texports.isLessThan7Days = isLessThan7Days;\n\texports.convertDateToString = convertDateToString;\n\texports.formatTime = formatTime;\n\texports.constructInterestObj = constructInterestObj;\n\texports.formatResolution = formatResolution;\n\texports.parseResults = parseResults;\n\texports.formatComparisonItems = formatComparisonItems;\n\texports.getInterestResults = getInterestResults;\n\texports.getTrendingResults = getTrendingResults;\n\texports.constructTrendingObj = constructTrendingObj;\n\tfunction isLessThan7Days(date1, date2) {\n\t  return Math.abs(date2 - date1) / (24 * 60 * 60 * 1000) < 7;\n\t}\n\t\n\tfunction convertDateToString(d, shouldIncludeTime, formatWithoutDashes) {\n\t  var month = (d.getUTCMonth() + 1).toString();\n\t  var day = d.getUTCDate().toString();\n\t\n\t  var dash = formatWithoutDashes ? '' : '-';\n\t\n\t  month = month.length < 2 ? '0' + month : month;\n\t  day = formatWithoutDashes && day.length < 2 ? '0' + day : day;\n\t\n\t  var year = d.getUTCFullYear().toString();\n\t  var hour = d.getUTCHours();\n\t  var minute = d.getUTCMinutes();\n\t\n\t  if (shouldIncludeTime) {\n\t    return '' + year + dash + month + dash + day + 'T' + hour + '\\\\:' + minute + '\\\\:00';\n\t  }\n\t\n\t  return '' + year + dash + month + dash + day;\n\t}\n\t\n\tfunction formatTime(obj) {\n\t  if (obj.startTime && obj.endTime && obj.startTime > obj.endTime) {\n\t    var temp = obj.startTime;\n\t\n\t    obj.startTime = obj.endTime;\n\t    obj.endTime = temp;\n\t  }\n\t\n\t  if (!obj.endTime) obj.endTime = new Date();\n\t  if (!obj.startTime) obj.startTime = new Date('2004-01-01');\n\t\n\t  var shouldIncludeTime = isLessThan7Days(obj.startTime, obj.endTime);\n\t\n\t  var startTime = convertDateToString(obj.startTime, shouldIncludeTime && obj.granularTimeResolution);\n\t  var endTime = convertDateToString(obj.endTime, shouldIncludeTime && obj.granularTimeResolution);\n\t\n\t  obj.time = startTime + ' ' + endTime;\n\t  return obj;\n\t}\n\t\n\tfunction validateGeo(obj) {\n\t  var multiGeoKeyword = Array.isArray(obj.geo) && Array.isArray(obj.keyword);\n\t\n\t  if (multiGeoKeyword && obj.geo.length !== obj.keyword.length) {\n\t    return new Error('Geo length must be equal to keyword length');\n\t  }\n\t\n\t  return obj;\n\t}\n\t\n\tfunction validateTime(obj) {\n\t  if (obj.startTime && !(obj.startTime instanceof Date)) {\n\t    obj = new Error('startTime must be a Date object');\n\t  }\n\t\n\t  if (obj.endTime && !(obj.endTime instanceof Date)) {\n\t    obj = new Error('endTime must be a Date object');\n\t  }\n\t\n\t  return obj;\n\t}\n\t\n\tvar invalidCb = function invalidCb(cb) {\n\t  return !!cb && typeof cb !== 'function';\n\t};\n\t\n\tfunction validateObj(obj, cbFunc) {\n\t  if (!obj) {\n\t    obj = new Error('Must supply an object');\n\t  } else if (!!obj && (typeof obj === 'undefined' ? 'undefined' : _typeof(obj)) !== 'object' || Array.isArray(obj)) {\n\t    obj = new Error('Must supply an object');\n\t  } else if (!obj.keyword) {\n\t    obj = new Error('Must have a keyword field');\n\t  }\n\t\n\t  if (invalidCb(cbFunc)) {\n\t    obj = new Error('Callback function must be a function');\n\t  }\n\t\n\t  obj = validateGeo(obj);\n\t  obj = validateTime(obj);\n\t\n\t  return obj;\n\t}\n\t\n\t/**\r\n\t * Validates the obj and callback\r\n\t * and sets defaults for anything that haven't been supplied\r\n\t * @param {Object} obj - the object with .keyword property\r\n\t * @param {Function} cb - an optional callback function\r\n\t * @return {Object} - object with decorated obj and cbFunc properties\r\n\t */\n\tfunction constructInterestObj(obj, cbFunc) {\n\t\n\t  if (typeof obj === 'function') cbFunc = obj;\n\t\n\t  obj = validateObj(obj, cbFunc);\n\t\n\t  if (!obj.hl) obj.hl = 'en-US';\n\t  if (!obj.category) obj.category = 0;\n\t  if (!obj.timezone) obj.timezone = new Date().getTimezoneOffset();\n\t\n\t  var possibleProperties = ['images', 'news', 'youtube', 'froogle', ''];\n\t\n\t  if (possibleProperties.indexOf(obj.property) === -1) {\n\t    obj.property = '';\n\t  }\n\t\n\t  if (!cbFunc) {\n\t    cbFunc = function cbFunc(err, res) {\n\t      if (err) return err;\n\t      return res;\n\t    };\n\t  }\n\t\n\t  obj = formatTime(obj);\n\t\n\t  return {\n\t    cbFunc: cbFunc,\n\t    obj: obj\n\t  };\n\t}\n\t\n\tfunction formatResolution() {\n\t  var resolution = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : '';\n\t\n\t  var resolutions = ['COUNTRY', 'REGION', 'CITY', 'DMA'];\n\t  var isResValid = resolutions.some(function (res) {\n\t    return res === resolution.toUpperCase();\n\t  });\n\t\n\t  if (isResValid) return resolution.toUpperCase();\n\t  return '';\n\t}\n\t\n\t/**\r\n\t * Parse the result of the google api as JSON\r\n\t * Throws an Error if the JSON is invalid\r\n\t * @param  {String} results\r\n\t * @return {Object}\r\n\t */\n\tfunction parseResults(results) {\n\t  // If this fails, you've hit the rate limit or Google has changed something\n\t  try {\n\t    return JSON.parse(results.slice(4)).widgets;\n\t  } catch (e) {\n\t    // Throw the JSON error e.g.\n\t    // { message: 'Unexpected token C in JSON at position 0',\n\t    //   requestBody: '<!DOCTYPE html><html>...'}\n\t    e.requestBody = results;\n\t    throw e;\n\t  }\n\t}\n\t\n\t/**\r\n\t * Create the array of comparisonItems to be used\r\n\t * @param  {Object} obj The query obj with .keyword property and optionally\r\n\t *                      the .geo property\r\n\t * @return {Array}     Returns an array of comparisonItems\r\n\t */\n\tfunction formatComparisonItems(obj) {\n\t  var isMultiRegion = obj.geo && Array.isArray(obj.geo);\n\t  var isMultiKeyword = Array.isArray(obj.keyword);\n\t\n\t  // Duplicate keywords to match the length of geo\n\t  if (isMultiRegion && !isMultiKeyword) {\n\t    obj.keyword = Array(obj.geo.length).fill(obj.keyword);\n\t    isMultiKeyword = true;\n\t  }\n\t\n\t  // If we are requesting an array of keywords for comparison\n\t  if (isMultiKeyword) {\n\t\n\t    // Map the keywords to the items array\n\t    var items = obj.keyword.reduce(function (arr, keyword) {\n\t      // Add the keyword to the array\n\t      arr.push(_extends({}, obj, { keyword: keyword }));\n\t\n\t      return arr;\n\t    }, []);\n\t\n\t    // Is there an array of regions as well?\n\t    if (isMultiRegion) {\n\t\n\t      obj.geo.forEach(function (region, index) {\n\t        items[index].geo = region;\n\t      });\n\t    }\n\t\n\t    return items;\n\t  }\n\t\n\t  return [obj];\n\t}\n\t\n\tfunction getInterestResults(request) {\n\t  return function (searchType, obj) {\n\t    var map = {\n\t      'Auto complete': {\n\t        path: '/trends/api/autocomplete/' + encodeURIComponent(obj.keyword)\n\t      },\n\t      'Interest over time': {\n\t        path: '/trends/api/widgetdata/multiline',\n\t        _id: 'TIMESERIES'\n\t      },\n\t      'Interest by region': {\n\t        path: '/trends/api/widgetdata/comparedgeo',\n\t        resolution: formatResolution(obj.resolution),\n\t        _id: 'GEO_MAP'\n\t      },\n\t      'Related topics': {\n\t        path: '/trends/api/widgetdata/relatedsearches',\n\t        _id: 'RELATED_TOPICS'\n\t      },\n\t      'Related queries': {\n\t        path: '/trends/api/widgetdata/relatedsearches',\n\t        _id: 'RELATED_QUERIES'\n\t      }\n\t    };\n\t\n\t    var req = {\n\t      comparisonItem: formatComparisonItems(obj),\n\t      category: obj.category,\n\t      property: obj.property\n\t    };\n\t    var includeLowSearchVolumeGeos = obj.includeLowSearchVolumeGeos ? obj.includeLowSearchVolumeGeos : false;\n\t\n\t    if (searchType === 'Interest by region' && obj.resolution === 'CITY') {\n\t      req.includeLowSearchVolumeGeos = includeLowSearchVolumeGeos;\n\t    }\n\t\n\t    var options = {\n\t      method: 'GET',\n\t      host: 'trends.google.com',\n\t      path: '/trends/api/explore',\n\t      qs: {\n\t        hl: obj.hl,\n\t        req: JSON.stringify(req),\n\t        tz: obj.timezone\n\t      }\n\t    };\n\t\n\t    if (obj.agent) options.agent = obj.agent;\n\t\n\t    var _map$searchType = map[searchType],\n\t        path = _map$searchType.path,\n\t        resolution = _map$searchType.resolution,\n\t        _id = _map$searchType._id;\n\t\n\t\n\t    return request(options).then(function (results) {\n\t      var parsedResults = parseResults(results);\n\t\n\t      /**\r\n\t       * Search for the id that matches the search result\r\n\t       * Auto complete does not have results on initial query\r\n\t       * so just pass the first available result with request\r\n\t      */\n\t      var resultObj = parsedResults.find(function (_ref) {\n\t        var _ref$id = _ref.id,\n\t            id = _ref$id === undefined ? '' : _ref$id,\n\t            request = _ref.request;\n\t\n\t        return id.indexOf(_id) > -1 || searchType === 'Auto complete' && request;\n\t      });\n\t\n\t      if (!resultObj) {\n\t        var errObj = {\n\t          message: 'Available widgets does not contain selected api type',\n\t          requestBody: results\n\t        };\n\t\n\t        throw errObj;\n\t      }\n\t\n\t      var req = resultObj.request;\n\t      var token = resultObj.token;\n\t\n\t      if (resolution) req.resolution = resolution;\n\t      req.requestOptions.category = obj.category;\n\t      req.requestOptions.property = obj.property;\n\t\n\t      if (searchType === 'Interest by region' && obj.resolution === 'CITY') {\n\t        req.includeLowSearchVolumeGeos = includeLowSearchVolumeGeos;\n\t      }\n\t      req = JSON.stringify(req);\n\t\n\t      var nextOptions = {\n\t        path: path,\n\t        method: 'GET',\n\t        host: 'trends.google.com',\n\t        qs: {\n\t          hl: obj.hl,\n\t          req: req,\n\t          token: token,\n\t          tz: obj.timezone\n\t        }\n\t      };\n\t\n\t      if (obj.agent) nextOptions.agent = obj.agent;\n\t\n\t      return request(nextOptions);\n\t    }).then(function (res) {\n\t      try {\n\t        /** JSON.parse will decode unicode */\n\t        var results = JSON.stringify(JSON.parse(res.slice(5)));\n\t\n\t        return results;\n\t      } catch (e) {\n\t        /** throws if not valid JSON, so just return unaltered res string */\n\t        return res;\n\t      }\n\t    });\n\t  };\n\t}\n\t\n\tfunction getTrendingResults(request) {\n\t  return function (searchType, obj) {\n\t    var searchTypeMap = {\n\t      'Daily trends': {\n\t        path: '/trends/api/dailytrends',\n\t        extraParams: {\n\t          ed: convertDateToString(obj.trendDate, false, true),\n\t          ns: obj.ns\n\t        }\n\t      },\n\t      'Real time trends': {\n\t        path: '/trends/api/realtimetrends',\n\t        extraParams: {\n\t          fi: 0,\n\t          fs: 0,\n\t          ri: 300, // # of trending stories IDs returned\n\t          rs: 20,\n\t          sort: 0\n\t        }\n\t      }\n\t    };\n\t\n\t    var options = {\n\t      method: 'GET',\n\t      host: 'trends.google.com',\n\t      path: searchTypeMap[searchType].path,\n\t      qs: {\n\t        hl: obj.hl,\n\t        tz: obj.timezone,\n\t        geo: obj.geo,\n\t        cat: obj.category\n\t      }\n\t    };\n\t\n\t    if (obj.agent) options.agent = obj.agent;\n\t\n\t    options.qs = _extends({}, options.qs, searchTypeMap[searchType].extraParams);\n\t\n\t    return request(options).then(function (res) {\n\t      try {\n\t        /** JSON.parse will decode unicode */\n\t        return JSON.stringify(JSON.parse(res.slice(5)));\n\t      } catch (e) {\n\t        /** throws if not valid JSON, so just return unaltered res string */\n\t        return res;\n\t      }\n\t    });\n\t  };\n\t}\n\t\n\tfunction constructTrendingObj(obj, cbFunc) {\n\t  if (typeof obj === 'function') cbFunc = obj;\n\t\n\t  if (!obj || !!obj && (typeof obj === 'undefined' ? 'undefined' : _typeof(obj)) !== 'object' || Array.isArray(obj)) {\n\t    obj = new Error('Must supply an object');\n\t  } else {\n\t    if (!obj.trendDate || !(obj.trendDate instanceof Date)) {\n\t      delete obj.trendDate;\n\t    }\n\t\n\t    var date = new Date();\n\t    var defaults = { hl: 'en-US',\n\t      category: 'all',\n\t      timezone: date.getTimezoneOffset(),\n\t      trendDate: date,\n\t      ns: 15\n\t    };\n\t\n\t    obj = _extends({}, defaults, obj); // Merge user params into obj with defaults\n\t  }\n\t\n\t  if (invalidCb(cbFunc)) {\n\t    obj = new Error('Callback function must be a function');\n\t  }\n\t\n\t  if (!obj.geo) {\n\t    obj = new Error('Must supply an geographical location (geo)');\n\t  }\n\t\n\t  if (!cbFunc) {\n\t    cbFunc = function cbFunc(err, res) {\n\t      if (err) return err;\n\t      return res;\n\t    };\n\t  }\n\t\n\t  return {\n\t    cbFunc: cbFunc,\n\t    obj: obj\n\t  };\n\t}\n\n/***/ }\n/******/ ])\n});\n;\n\n\n/** WEBPACK FOOTER **\n ** google-trends-api.min.js\n **/"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap 03af83cedb275716dfc4\n **/","'use strict';\r\nimport api from './api';\r\nimport request from './request';\r\nimport { getInterestResults, getTrendingResults,\r\n          constructInterestObj, constructTrendingObj } from './utilities';\r\n\r\nconst interestHandler = {\r\n  processor: getInterestResults,\r\n  objectConstructor: constructInterestObj,\r\n};\r\n\r\nconst trendHandler = {\r\n  processor: getTrendingResults,\r\n  objectConstructor: constructTrendingObj,\r\n};\r\n\r\nconst apiRequest = api.bind(this, request);\r\n\r\nexport default {\r\n  autoComplete: apiRequest('Auto complete', interestHandler),\r\n  dailyTrends: apiRequest('Daily trends', trendHandler),\r\n  interestByRegion: apiRequest('Interest by region', interestHandler),\r\n  interestOverTime: apiRequest('Interest over time', interestHandler),\r\n  realTimeTrends: apiRequest('Real time trends', trendHandler),\r\n  relatedQueries: apiRequest('Related queries', interestHandler),\r\n  relatedTopics: apiRequest('Related topics', interestHandler),\r\n};\r\n\n\n\n/** WEBPACK FOOTER **\n ** D:/MyJobs/DeepVision/google-trends-api/~/eslint-loader!./src/index.js\n **/","'use strict';\r\n\r\nexport default (request, searchType, { processor, objectConstructor }) => {\r\n  const resultsPromise = processor(request);\r\n\r\n  return (reqObj, cb) => {\r\n    const {\r\n      cbFunc,\r\n      obj,\r\n    } = objectConstructor(reqObj, cb);\r\n\r\n    if (obj instanceof Error) return Promise.reject(cbFunc(obj));\r\n\r\n    return resultsPromise(searchType, obj)\r\n    .then(res => cbFunc(null, res))\r\n    .catch(err => Promise.reject(cbFunc(err)));\r\n  };\r\n};\r\n\n\n\n/** WEBPACK FOOTER **\n ** D:/MyJobs/DeepVision/google-trends-api/~/eslint-loader!./src/api.js\n **/","'use strict';\r\nimport https from 'https';\r\nimport querystring from 'querystring';\r\n\r\n// cache of the cookie - avoid re-requesting on subsequent requests.\r\nlet cookieVal;\r\n\r\n// simpler request method for avoiding double-promise confusion\r\nfunction rereq(options, done) {\r\n  let req;\r\n\r\n  req = https.request(options, (res) => {\r\n    let chunk = '';\r\n\r\n    res.on('data', (data) => {\r\n      chunk += data;\r\n    });\r\n    res.on('end', () => {\r\n      done(null, chunk.toString('utf8'));\r\n    });\r\n  });\r\n  req.on('error', (e) => {\r\n    done(e);\r\n  });\r\n  req.end();\r\n}\r\n\r\nexport default function request({method, host, path, qs, agent}) {\r\n  const options = {\r\n    host,\r\n    method,\r\n    path: `${path}?${querystring.stringify(qs)}`,\r\n  };\r\n\r\n  if (agent) options.agent = agent;\r\n  // will use cached cookieVal if set on 429 error\r\n  if (cookieVal) options.headers = {'cookie': cookieVal};\r\n\r\n  return new Promise((resolve, reject) => {\r\n    const req = https.request(options, (res) => {\r\n      let chunk = '';\r\n\r\n      res.on('data', (data) => {\r\n        chunk += data;\r\n      });\r\n\r\n      res.on('end', () => {\r\n        if (res.statusCode === 429 && res.headers['set-cookie']) {\r\n          // Fix for the \"too many requests\" issue\r\n          // Look for the set-cookie header and re-request\r\n          cookieVal = res.headers['set-cookie'][0].split(';')[0];\r\n          options.headers = {'cookie': cookieVal};\r\n          rereq(options, function(err, response) {\r\n            if (err) return reject(err);\r\n            resolve(response);\r\n          });\r\n        } else {\r\n          resolve(chunk.toString('utf8'));\r\n        }\r\n      });\r\n    });\r\n\r\n    req.on('error', (e) => {\r\n      reject(e);\r\n    });\r\n\r\n    req.end();\r\n  });\r\n}\r\n\n\n\n/** WEBPACK FOOTER **\n ** D:/MyJobs/DeepVision/google-trends-api/~/eslint-loader!./src/request.js\n **/","module.exports = require(\"https\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"https\"\n ** module id = 3\n ** module chunks = 0\n **/","module.exports = require(\"querystring\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"querystring\"\n ** module id = 4\n ** module chunks = 0\n **/","'use strict';\r\nexport function isLessThan7Days(date1, date2) {\r\n  return (Math.abs(date2 - date1) / (24 * 60 * 60 * 1000)) < 7;\r\n}\r\n\r\nexport function convertDateToString(d, shouldIncludeTime, formatWithoutDashes) {\r\n  let month = (d.getUTCMonth() + 1).toString();\r\n  let day = d.getUTCDate().toString();\r\n\r\n  const dash = formatWithoutDashes ? '' : '-';\r\n\r\n  month = month.length < 2 ? '0' + month : month;\r\n  day = formatWithoutDashes && day.length < 2 ? '0' + day : day;\r\n\r\n  const year = d.getUTCFullYear().toString();\r\n  const hour = d.getUTCHours();\r\n  const minute = d.getUTCMinutes();\r\n\r\n  if (shouldIncludeTime) {\r\n    return `${year}${dash}${month}${dash}${day}T${hour}\\\\:${minute}\\\\:00`;\r\n  }\r\n\r\n  return `${year}${dash}${month}${dash}${day}`;\r\n}\r\n\r\nexport function formatTime(obj) {\r\n  if (obj.startTime && obj.endTime && obj.startTime > obj.endTime) {\r\n    const temp = obj.startTime;\r\n\r\n    obj.startTime = obj.endTime;\r\n    obj.endTime = temp;\r\n  }\r\n\r\n  if (!obj.endTime) obj.endTime = new Date();\r\n  if (!obj.startTime) obj.startTime = new Date('2004-01-01');\r\n\r\n  const shouldIncludeTime = isLessThan7Days(obj.startTime, obj.endTime);\r\n\r\n  const startTime = convertDateToString(obj.startTime,\r\n    shouldIncludeTime && obj.granularTimeResolution);\r\n  const endTime = convertDateToString(obj.endTime,\r\n    shouldIncludeTime && obj.granularTimeResolution);\r\n\r\n  obj.time = `${startTime} ${endTime}`;\r\n  return obj;\r\n}\r\n\r\nfunction validateGeo(obj) {\r\n  const multiGeoKeyword = Array.isArray(obj.geo) && Array.isArray(obj.keyword);\r\n\r\n  if (multiGeoKeyword && obj.geo.length !== obj.keyword.length) {\r\n    return new Error('Geo length must be equal to keyword length');\r\n  }\r\n\r\n  return obj;\r\n}\r\n\r\nfunction validateTime(obj) {\r\n  if (obj.startTime && !(obj.startTime instanceof Date)) {\r\n    obj = new Error('startTime must be a Date object');\r\n  }\r\n\r\n  if (obj.endTime && !(obj.endTime instanceof Date)) {\r\n    obj = new Error('endTime must be a Date object');\r\n  }\r\n\r\n  return obj;\r\n}\r\n\r\nconst invalidCb = cb => !!cb && typeof cb !== 'function';\r\n\r\nfunction validateObj(obj, cbFunc) {\r\n  if (!obj) {\r\n    obj = new Error('Must supply an object');\r\n  } else if (!!obj && typeof obj !== 'object' || Array.isArray(obj)) {\r\n    obj = new Error('Must supply an object');\r\n  } else if (!obj.keyword) {\r\n    obj = new Error('Must have a keyword field');\r\n  }\r\n\r\n  if (invalidCb(cbFunc)) {\r\n    obj = new Error('Callback function must be a function');\r\n  }\r\n\r\n  obj = validateGeo(obj);\r\n  obj = validateTime(obj);\r\n\r\n  return obj;\r\n}\r\n\r\n/**\r\n * Validates the obj and callback\r\n * and sets defaults for anything that haven't been supplied\r\n * @param {Object} obj - the object with .keyword property\r\n * @param {Function} cb - an optional callback function\r\n * @return {Object} - object with decorated obj and cbFunc properties\r\n */\r\nexport function constructInterestObj(obj, cbFunc) {\r\n\r\n  if (typeof obj === 'function') cbFunc = obj;\r\n\r\n  obj = validateObj(obj, cbFunc);\r\n\r\n  if (!obj.hl) obj.hl = 'en-US';\r\n  if (!obj.category) obj.category = 0;\r\n  if (!obj.timezone) obj.timezone = new Date().getTimezoneOffset();\r\n\r\n  const possibleProperties = ['images', 'news', 'youtube', 'froogle', ''];\r\n\r\n  if (possibleProperties.indexOf(obj.property) === -1) {\r\n    obj.property = '';\r\n  }\r\n\r\n  if (!cbFunc) {\r\n    cbFunc = (err, res) => {\r\n      if (err) return err;\r\n      return res;\r\n    };\r\n  }\r\n\r\n  obj = formatTime(obj);\r\n\r\n  return {\r\n    cbFunc,\r\n    obj,\r\n  };\r\n}\r\n\r\nexport function formatResolution(resolution = '') {\r\n  const resolutions = ['COUNTRY', 'REGION', 'CITY', 'DMA'];\r\n  const isResValid = resolutions.some((res) => {\r\n    return res === resolution.toUpperCase();\r\n  });\r\n\r\n  if (isResValid) return resolution.toUpperCase();\r\n  return '';\r\n}\r\n\r\n/**\r\n * Parse the result of the google api as JSON\r\n * Throws an Error if the JSON is invalid\r\n * @param  {String} results\r\n * @return {Object}\r\n */\r\nexport function parseResults(results) {\r\n  // If this fails, you've hit the rate limit or Google has changed something\r\n  try {\r\n    return JSON.parse(results.slice(4)).widgets;\r\n  } catch (e) {\r\n    // Throw the JSON error e.g.\r\n    // { message: 'Unexpected token C in JSON at position 0',\r\n    //   requestBody: '<!DOCTYPE html><html>...'}\r\n    e.requestBody = results;\r\n    throw e;\r\n  }\r\n}\r\n\r\n/**\r\n * Create the array of comparisonItems to be used\r\n * @param  {Object} obj The query obj with .keyword property and optionally\r\n *                      the .geo property\r\n * @return {Array}     Returns an array of comparisonItems\r\n */\r\nexport function formatComparisonItems(obj) {\r\n  const isMultiRegion = obj.geo && Array.isArray(obj.geo);\r\n  let isMultiKeyword = Array.isArray(obj.keyword);\r\n\r\n  // Duplicate keywords to match the length of geo\r\n  if (isMultiRegion && !isMultiKeyword) {\r\n    obj.keyword = Array(obj.geo.length).fill(obj.keyword);\r\n    isMultiKeyword = true;\r\n  }\r\n\r\n  // If we are requesting an array of keywords for comparison\r\n  if (isMultiKeyword) {\r\n\r\n    // Map the keywords to the items array\r\n    let items = obj.keyword.reduce((arr, keyword) => {\r\n      // Add the keyword to the array\r\n      arr.push({ ...obj, keyword });\r\n\r\n      return arr;\r\n    }, []);\r\n\r\n    // Is there an array of regions as well?\r\n    if (isMultiRegion) {\r\n\r\n      obj.geo.forEach((region, index) => {\r\n        items[index].geo = region;\r\n      });\r\n    }\r\n\r\n    return items;\r\n  }\r\n\r\n  return [obj];\r\n}\r\n\r\nexport function getInterestResults(request) {\r\n  return (searchType, obj) => {\r\n    const map = {\r\n      'Auto complete': {\r\n        path: `/trends/api/autocomplete/${encodeURIComponent(obj.keyword)}`,\r\n      },\r\n      'Interest over time': {\r\n        path: '/trends/api/widgetdata/multiline',\r\n        _id: 'TIMESERIES',\r\n      },\r\n      'Interest by region': {\r\n        path: '/trends/api/widgetdata/comparedgeo',\r\n        resolution: formatResolution(obj.resolution),\r\n        _id: 'GEO_MAP',\r\n      },\r\n      'Related topics': {\r\n        path: '/trends/api/widgetdata/relatedsearches',\r\n        _id: 'RELATED_TOPICS',\r\n      },\r\n      'Related queries': {\r\n        path: '/trends/api/widgetdata/relatedsearches',\r\n        _id: 'RELATED_QUERIES',\r\n      },\r\n    };\r\n\r\n    const req = {\r\n      comparisonItem: formatComparisonItems(obj),\r\n      category: obj.category,\r\n      property: obj.property,\r\n    };\r\n    const includeLowSearchVolumeGeos = (obj.includeLowSearchVolumeGeos) ?\r\n        obj.includeLowSearchVolumeGeos : false;\r\n\r\n    if (searchType === 'Interest by region' &&\r\n        obj.resolution === 'CITY') {\r\n      req.includeLowSearchVolumeGeos = includeLowSearchVolumeGeos;\r\n    }\r\n\r\n    const options = {\r\n      method: 'GET',\r\n      host: 'trends.google.com',\r\n      path: '/trends/api/explore',\r\n      qs: {\r\n        hl: obj.hl,\r\n        req: JSON.stringify(req),\r\n        tz: obj.timezone,\r\n      },\r\n    };\r\n\r\n    if (obj.agent) options.agent = obj.agent;\r\n\r\n    const { path, resolution, _id } = map[searchType];\r\n\r\n    return request(options)\r\n    .then((results) => {\r\n      const parsedResults = parseResults(results);\r\n\r\n      /**\r\n       * Search for the id that matches the search result\r\n       * Auto complete does not have results on initial query\r\n       * so just pass the first available result with request\r\n      */\r\n      const resultObj = parsedResults.find(({ id = '', request }) => {\r\n        return id.indexOf(_id) > -1 ||\r\n          (searchType === 'Auto complete' && request);\r\n      });\r\n\r\n      if (!resultObj) {\r\n        const errObj = {\r\n          message: 'Available widgets does not contain selected api type',\r\n          requestBody: results,\r\n        };\r\n\r\n        throw errObj;\r\n      }\r\n\r\n      let req = resultObj.request;\r\n      const token = resultObj.token;\r\n\r\n      if (resolution) req.resolution = resolution;\r\n      req.requestOptions.category = obj.category;\r\n      req.requestOptions.property = obj.property;\r\n\r\n      if (searchType === 'Interest by region' &&\r\n          obj.resolution === 'CITY') {\r\n        req.includeLowSearchVolumeGeos = includeLowSearchVolumeGeos;\r\n      }\r\n      req = JSON.stringify(req);\r\n\r\n      const nextOptions = {\r\n        path,\r\n        method: 'GET',\r\n        host: 'trends.google.com',\r\n        qs: {\r\n          hl: obj.hl,\r\n          req,\r\n          token,\r\n          tz: obj.timezone,\r\n        },\r\n      };\r\n\r\n      if (obj.agent) nextOptions.agent = obj.agent;\r\n\r\n      return request(nextOptions);\r\n    })\r\n    .then((res) => {\r\n      try {\r\n        /** JSON.parse will decode unicode */\r\n        const results = JSON.stringify(JSON.parse(res.slice(5)));\r\n\r\n        return results;\r\n      } catch (e) {\r\n        /** throws if not valid JSON, so just return unaltered res string */\r\n        return res;\r\n      }\r\n    });\r\n  };\r\n}\r\n\r\nexport function getTrendingResults(request) {\r\n  return (searchType, obj) => {\r\n    const searchTypeMap = {\r\n      'Daily trends': {\r\n        path: '/trends/api/dailytrends',\r\n        extraParams: {\r\n          ed: convertDateToString(obj.trendDate, false, true),\r\n          ns: obj.ns,\r\n        },\r\n      },\r\n      'Real time trends': {\r\n        path: '/trends/api/realtimetrends',\r\n        extraParams: {\r\n          fi: 0,\r\n          fs: 0,\r\n          ri: 300, // # of trending stories IDs returned\r\n          rs: 20,\r\n          sort: 0,\r\n        },\r\n      },\r\n    };\r\n\r\n    const options = {\r\n      method: 'GET',\r\n      host: 'trends.google.com',\r\n      path: searchTypeMap[searchType].path,\r\n      qs: {\r\n        hl: obj.hl,\r\n        tz: obj.timezone,\r\n        geo: obj.geo,\r\n        cat: obj.category,\r\n      },\r\n    };\r\n\r\n    if (obj.agent) options.agent = obj.agent;\r\n\r\n    options.qs = {...options.qs, ...searchTypeMap[searchType].extraParams};\r\n\r\n    return request(options)\r\n    .then((res) => {\r\n      try {\r\n        /** JSON.parse will decode unicode */\r\n        return JSON.stringify(JSON.parse(res.slice(5)));\r\n      } catch (e) {\r\n        /** throws if not valid JSON, so just return unaltered res string */\r\n        return res;\r\n      }\r\n    });\r\n  };\r\n}\r\n\r\nexport function constructTrendingObj(obj, cbFunc) {\r\n  if (typeof obj === 'function') cbFunc = obj;\r\n\r\n  if (!obj || !!obj && typeof obj !== 'object' || Array.isArray(obj)) {\r\n    obj = new Error('Must supply an object');\r\n  } else {\r\n    if (!obj.trendDate || !(obj.trendDate instanceof Date)) {\r\n      delete obj.trendDate;\r\n    }\r\n\r\n    const date = new Date();\r\n    const defaults = { hl: 'en-US',\r\n                      category: 'all',\r\n                      timezone: date.getTimezoneOffset(),\r\n                      trendDate: date,\r\n                      ns: 15,\r\n                    };\r\n\r\n    obj = { ...defaults, ...obj }; // Merge user params into obj with defaults\r\n  }\r\n\r\n  if (invalidCb(cbFunc)) {\r\n    obj = new Error('Callback function must be a function');\r\n  }\r\n\r\n  if (!obj.geo) {\r\n    obj = new Error('Must supply an geographical location (geo)');\r\n  }\r\n\r\n  if (!cbFunc) {\r\n    cbFunc = (err, res) => {\r\n      if (err) return err;\r\n      return res;\r\n    };\r\n  }\r\n\r\n  return {\r\n    cbFunc,\r\n    obj,\r\n  };\r\n}\r\n\n\n\n/** WEBPACK FOOTER **\n ** D:/MyJobs/DeepVision/google-trends-api/~/eslint-loader!./src/utilities.js\n **/"],"sourceRoot":""}